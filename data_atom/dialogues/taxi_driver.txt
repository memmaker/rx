%rec: OpeningBranch

cond: IsInCombatWithPlayer(NPC_NAME)
goto: PlayerCombatBranch

cond: IsInCombat(NPC_NAME)
goto: CombatBranch

cond: true
goto: DefaultIntroduction

%rec: Nodes

name: PlayerCombatBranch
npc: Alright, speak up. Why the hell are you attacking me?
#
o_text: I'm sorry, I didn't mean to attack you.
o_goto: Apology
#
o_text: Because I can.
o_goto: BecauseICan

name: Apology
npc: Fine, just don't do it again.
effect: EndHostility
effect: EndConversation

name: BecauseICan
npc: You're a real piece of work, you know that?
effect: EndConversation

name: CombatBranch
npc: I'm kind of busy right now.
effect: EndConversation

name: DefaultIntroduction
npc: Where to, stranger?
#
o_text: Just drive.
o_goto: Drive
#
o_text: Get me to this location here (Cryo Facility).
o_cond: HasFlag('LocationKnown(cryolab)') && !IsMap('cryolab')
o_goto: CryoFacility
#
o_text: The old mansion, right outside Kelso.
o_cond: HasFlag('LocationKnown(mansion)') && !IsMap('mansion')
o_goto: Mansion
#
o_text: Just take me back to Kelso.
o_cond: !IsMap('town')
o_goto: Kelso
#
o_text: Nevermind.
o_goto: Bye

name: Bye
npc: Alright, see you around.
effect: EndConversation

name: Drive
npc: Sure thing.
#
o_text: (Wait)
o_goto: DefaultIntroduction

name: Kelso
npc: Alright, let's go.
effect: Transition('town', 'taxi_stand')
effect: EndConversation

name: CryoFacility
npc: You got it.
effect: Transition('cryolab', 'taxi_stand')
effect: EndConversation

name: Mansion
npc: You got it.
effect: Transition('mansion', 'taxi_stand')
effect: EndConversation